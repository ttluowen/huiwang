/**
 * 重新发送注册码邮件脚本。
 * 
 * @since 2018-01-28
 * @version 1.0
 * @author Luowen
 */


/**
 * 页面基本逻辑管理。
 * 
 * @return {void}
 */
((function pageManage() {
	var oVueOption = {
		el: "#pbody",
		data: {
			username: "",
			original: "",
			password: "",
			password2: "",
		},
		mounted: function() {
			document.querySelector("[name=username]").focus();
		},
		methods: {
			/**
			 * 提交。
			 */
			submit: function() {
				var _this = this;

				axios.post(TOP_DOMAIN + "api/base/user/modifyPassword", {
					token: TOKEN,
					username: _this.username,
					original: _this.original,
					password: _this.password,
					password2: _this.password,
				}).then(function(oAjax) {
					var oAjaxData = oAjax.data;

					if (oAjaxData.c == 1) {
						_this.$Message.success("修改成功");

						_this.username = "";
						_this.original = "";
						_this.password = "";
						_this.password2 = "";
					} else {
						_this.$Message.error("修改失败，" + oAjaxData.d);
					}
				});
			}
		}
	};
	
	
	var vVue = new Vue(oVueOption);
	oVueOption = null;
}))();
