/**
 * 密码找回页脚本。
 * 
 * @since 2018-01-28
 * @version 1.0
 * @author Luowen
 */


/**
 * 页面基本逻辑管理。
 * 
 * @return {void}
 */
((function pageManage() {
	var oVueOption = {
		el: "#pbody",
		data: {
			username: "",
			email: "",
		},
		mounted: function() {
			document.querySelector("[name=username]").focus();
		},
		methods: {
			/**
			 * 注册。
			 */
			regist: function() {
				var _this = this;

				axios.post(TOP_DOMAIN + "api/base/user/revert", {
					token: TOKEN,
					username: _this.username,
					email: _this.email,
				}).then(function(oAjax) {
					var oAjaxData = oAjax.data;

					if (oAjaxData.c == 1) {
						_this.$Message.success("找回成功，新密码已经发送至您的邮箱");

						_this.username = "";
						_this.email = "";
					} else {
						_this.$Message.error("找回失败，" + oAjaxData.d);
					}
				});
			}
		}
	};
	
	
	var vVue = new Vue(oVueOption);
	oVueOption = null;
}))();
